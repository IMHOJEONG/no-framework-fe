# 실제 

- DOM의 실제 수정이 view.js에서 커밋이 되지 않음 

  - 분리된 DOM 요소를 수정하면 성능이 향상 (이 View 함수를 실제 DOM에 연결하고자 컨트롤러를 사용)

- 간단한 렌더링 엔진은 'requestAnimationFrame'을 기반으로 함 

  - 모든 DOM 조작이나 애니메이션은 이 DOM API를 기반으로 해야 함 

  - 이 콜백 내에서 DOM 작업을 수행하면 더 효율적이 됨 

  - 이 API는 메인 스레드를 차단하지 않으며, 다음 repaint가 이벤트 루프에서 스케줄링되기 직전에 실행됨


---

# Component 함수 

- 컴포넌트 기반의 애플리케이션을 작성하려면, 컴포넌트 간의 상호작용 하는데 있어, 선언적 방식을 사용해야 함 

  - 함수를 수동으로 연결하는 것이 아닌, 시스템은 모든 부분을 자동으로 연결할 것 

- 컴포넌트의 'name'을 data-component 속성에 넣음 

  - 이 속성은 View 함수의 필수 호출을 대체함 

- 컴포넌트 라이브러리를 생성하기 위한, 또 다른 필수 조건은 registry 

  - 레지스트리 = 애플리케이션에서 사용할 수 있는 모든 컴포넌트의 인덱스 

- 레지스트리의 키 = data-component 속성 값과 일치 (컴포넌트 기반 렌더링 엔진의 핵심 메커니즘)

  - 이 메커니즘은 루트 컨테이너(애플리케이션 뷰 함수) 뿐만 아니라, 생성할 모든 컴포넌트에도 적용되어야 함 

      - 모든 컴포넌트가 다른 컴포넌트 안에서도 사용될 수 있게 하기 위함 

- = 재사용성은 컴포넌트 기반 애플리케이션에서 필수적 

- 이렇게 하려면, 모든 컴포넌트가 data-component 속성의 값을 읽고 올바른 값을 자동으로 호출하는 기본 컴포넌트에서 상속되어야 함 

  - 하지만! 순수함수로 작성하고 있기 때문 (실제로는 이 기본 객체에서 상속받을 수 없음)

  - 따라서, 컴포넌트를 래핑하는 고차 함수를 생성해야 함 


---

# 동적 데이터 렌더링 

- 실제 애플리케이션에서는 사용자나 시스템의 이벤트에 의해 데이터가 변경됨

## 가상 DOM

- 선언적 렌더링 엔진의 성능을 개선시키는 방법 

- UI 표현은 메모리에 유지되고, '실제' DOM과 동기화됨 (실제 DOM은 가능한 한 적은 작업을 수행) ('조정'의 과정)

- 핵심은 diff 알고리즘 (실제 DOM을 문서에서 분리된(가상의) 새로운 DOM 요소의 사본으로 바꾸는 가장 빠른 방법을 찾아냄)

  - 애플리케이션 ---(생성)---> 가상 DOM 노드 ---(~에 의해 처리)---> Diff 알고리즘 ---(업데이트)---> 실제 DOM ---(이벤트 준비)---> 애플리케이션